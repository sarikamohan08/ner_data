import re

def clean_and_sanitize_text(text: str) -> str:
    """
    Clean text by removing special characters except basic punctuation,
    and escape quotes and backslashes for safe embedding in prompts.
    """
    # Remove unwanted special characters, keep letters, digits, spaces, punctuation (.,!?-)
    cleaned = re.sub(r"[^a-zA-Z0-9\s.,!?\-\"'\\]", "", text)
    # Escape backslashes first
    sanitized = cleaned.replace("\\", "\\\\")
    # Escape double quotes
    sanitized = sanitized.replace('"', '\\"')
    # Escape single quotes
    sanitized = sanitized.replace("'", "\\'")
    # Replace newlines/tabs with space
    sanitized = sanitized.replace("\n", " ").replace("\r", " ").replace("\t", " ")
    # Collapse multiple spaces to single space
    sanitized = re.sub(r"\s+", " ", sanitized).strip()
    return sanitized

# Example usage:
extracted_text = 'Hello! This is text with special chars: @#$%^&*() and "quotes" and \\backslashes\\.'
clean_text = clean_and_sanitize_text(extracted_text)
print(clean_text)
