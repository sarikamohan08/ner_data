import easyocr
import cv2
import matplotlib.pyplot as plt

# Step 1: Load the image
image_path = 'test.png'  # Replace with your image path
image = cv2.imread(image_path)

# Step 2: Convert the image to grayscale
gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

# Step 3: Initialize the EasyOCR Reader
reader = easyocr.Reader(['en'])  # 'en' is for English. Add more languages if needed.

# Step 4: Perform OCR on the image
result = reader.readtext(gray_image)

# Step 5: Display the results and annotate the image
for (bbox, text, prob) in result:
    print(f"Detected Text: {text} (Confidence: {prob})")
    # Draw bounding box and text on the image
    top_left = tuple(map(int, bbox[0]))
    bottom_right = tuple(map(int, bbox[2]))
    cv2.rectangle(image, top_left, bottom_right, (0, 255, 0), 2)
    cv2.putText(image, text, (top_left[0], top_left[1] - 10), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 2)

# Step 6: Display the image with detected text
plt.figure(figsize=(10, 10))
plt.imshow(cv2.cvtColor(image, cv2.COLOR_BGR2RGB))
plt.axis('off')
plt.show()
