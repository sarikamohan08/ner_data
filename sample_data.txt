from pymupdf4llm import Document as PDFDocument
from pymupdf4llm import Query

def extract_text_from_pdf(pdf_path):
    """
    Extracts text from the PDF and returns it as a list of strings, one per page.
    """
    doc = PDFDocument(pdf_path)
    pages_text = [page.get_text() for page in doc]
    doc.close()
    return pages_text

def query_pdf_content(pages_text, query_text):
    """
    Queries the PDF content using the provided query text.
    """
    # Combine all pages' text into a single string for querying
    full_text = "\n".join(pages_text)
    
    # Create a Query object
    query = Query(text=query_text)
    
    # Perform the query on the full text
    response = query.run(full_text)
    return response

# Define the path to your PDF file
pdf_path = "your_pdf_file.pdf"

# Step 1: Extract the PDF content
pages_text = extract_text_from_pdf(pdf_path)

# Step 2: Query the PDF content
query_text = "Explain the main concept of chapter 2"  # Sample query
response = query_pdf_content(pages_text, query_text)

# Print the query response
print("Query Response:", response)
