import pytesseract
from pdf2image import convert_from_path
import os

# Specify the path to the Tesseract OCR executable
pytesseract.pytesseract.tesseract_cmd = r'C:\Program Files\Tesseract-OCR\tesseract.exe'  # Update this path if necessary

def process_pdf_with_tesseract(file_path, output_path):
    try:
        # Convert the first page of the PDF to an image
        images = convert_from_path(file_path, first_page=1, last_page=1)
        
        if not images:
            print("No pages found in the PDF.")
            return
        
        # Use pytesseract to extract text from the first page
        text = pytesseract.image_to_string(images[0])
        
        # Check for the specific phrase
        if "Amendment to the agreement between HCA" in text:
            # Save the text to the output file
            with open(output_path, 'w', encoding='utf-8') as output_file:
                output_file.write(text)
            print(f"Text extracted and saved to {output_path}")
        else:
            print("The phrase was not found on the first page.")
    
    except Exception as e:
        print(f"An error occurred: {e}")

# Input and output file paths
input_pdf_path = "path_to_your_pdf_file.pdf"  # Replace with the actual PDF file path
output_text_path = "input_file.txt"

# Process the PDF
process_pdf_with_tesseract(input_pdf_path, output_text_path)
